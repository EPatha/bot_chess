<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EP Chess Bot</title>
  <link rel="stylesheet" href="https://unpkg.com/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #f7f7f7; /* ubah ke terang supaya papan terlihat jelas */
      color: #111;
      margin: 0;
    }
    #board {
      width: 384px;
      height: 384px;
      display: grid;
      grid-template-columns: repeat(8,48px);
      grid-template-rows: repeat(8,48px);
      gap: 0;
      border: 2px solid #333;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      background: #fff;
    }
    #board .message { padding: 12px; font-weight: 600; }
  </style>
  <script>
    // error reporting helper: tampilkan error di halaman supaya user tidak hanya melihat kotak kosong
    function reportErrorToPage(msg) {
      try {
        console.error(msg);
        const boardEl = document.getElementById('board');
        const safe = String(msg).replace(/</g, '&lt;').replace(/\n/g,'<br>');
        if (boardEl) boardEl.innerHTML = '<div class="message" style="color:#900;background:#fff;padding:12px;">' + safe + '</div>';
        else document.body.insertAdjacentHTML('afterbegin','<div class="message" style="color:#900;background:#fff;padding:12px;">'+safe+'</div>');
      } catch (e) {
        console.error('Failed to render error to page', e);
      }
    }

    window.addEventListener('error', function (e) {
      reportErrorToPage('Error: ' + (e && e.message ? e.message : e));
    });
    window.addEventListener('unhandledrejection', function (e) {
      const reason = e && e.reason ? (e.reason.message || e.reason) : e;
      reportErrorToPage('Unhandled promise rejection: ' + reason);
    });
  </script>
</head>
<body>
  <div id="board"><div class="message">Memuat papan...</div></div>

  <div id="controls">
    <button id="btn-next">Next Move (bot)</button>
    <button id="btn-reset">Reset</button>
    <label><input type="checkbox" id="auto"> Auto-play (1s)</label>
  </div>

  <div id="info">
    <strong>FEN:</strong> <span id="fen"></span>
  </div>
  <div id="log"></div>

  <!-- Use the simple ui module that renders board as Unicode pieces -->
  <script type="module" src="./ui.js"></script>
</body>
</html>
